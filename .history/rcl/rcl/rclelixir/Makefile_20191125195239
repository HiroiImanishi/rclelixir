CC		:= gcc
TARGET	:= init.so
DEST	:= ./lib
ROOTDIR := /opt/ros/dashing
RCLDIR	:= ..

SRCDIR	:= ./nif_src
CFLAGS  := -O3 -fpic -shared
LINK 	:= -lstdc++
INCLUDE := -I /usr/lib/erlang/erts-10.5.2/include -I $(ROOTDIR)/include
LDFLAGS	:= -L $(ROOTDIR)/lib
LIBS	:= -lrcl -lrmw -lrcutils -lfastrtps

all:$(TARGET)
$(TARGET):
	$(CC) $(CFLAGS) $(LDFLAGS) $(INCLUDE) -o $(DEST)/$(TARGET) $(SRCDIR)/init_nif.c $(LIBS)

clean:
	rm $(DEST)/$(TARGET)